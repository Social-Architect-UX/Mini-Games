<!DOCTYPE html>
<html>
<head>
  <title>Glow Tag</title>
  <style>
    body {
      margin: 0;
      background: #111;
      overflow: hidden;
      font-family: sans-serif;
      color: white;
    }

    .player {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      position: absolute;
    }

    #you {
      background: cyan;
    }

    #it {
      background: red;
    }

    .glow {
      box-shadow: 0 0 20px 10px currentColor;
    }
  </style>
</head>
<body>

<div id="ui">
Move: Arrow Keys or WASD
</div>

<div id="you" class="player"></div>
<div id="it" class="player glow"></div>

<script>
  const speed = 4;

  const you = {
    el: document.getElementById("you"),
    x: 100,
    y: 100
  };

  const it = {
    el: document.getElementById("it"),
    x: 300,
    y: 200
  };

  let youAreIt = false;

  const keys = {};
  document.addEventListener("keydown", e => keys[e.key] = true);
  document.addEventListener("keyup", e => keys[e.key] = false);

  function moveYou() {
    if (keys.ArrowUp) you.y -= speed;
    if (keys.ArrowDown) you.y += speed;
    if (keys.ArrowLeft) you.x -= speed;
    if (keys.ArrowRight) you.x += speed;
  }

  function moveIt() {
    if (it.x < you.x) it.x += speed - 1;
    if (it.x > you.x) it.x -= speed - 1;
    if (it.y < you.y) it.y += speed - 1;
    if (it.y > you.y) it.y -= speed - 1;
  }

  function draw() {
    you.el.style.transform = `translate(${you.x}px, ${you.y}px)`;
    it.el.style.transform = `translate(${it.x}px, ${it.y}px)`;
  }

  function checkTag() {
    const dx = you.x - it.x;
    const dy = you.y - it.y;
    const distance = Math.hypot(dx, dy);

    if (distance < 40) {
      youAreIt = !youAreIt;

      you.el.classList.toggle("glow", youAreIt);
      it.el.classList.toggle("glow", !youAreIt);
    }
  }

  function gameLoop() {
    moveYou();
    moveIt();
    checkTag();
    draw();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
